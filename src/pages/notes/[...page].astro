---
import { IPage } from "../../utils/types";
import TopicListLayout from "../../layouts/TopicListLayout.astro";
import DefaultPageLayout from "../../layouts/DefaultPageLayout.astro";
import BackToPage from "../../components/BackToPage.astro";

export async function getStaticPaths({ paginate }) {
  const allNotes = await Astro.glob<any>("./*.md");
  const sortedNotes = allNotes.sort(
    (a, b) =>
      new Date(b.frontmatter.pubDate).valueOf() -
      new Date(a.frontmatter.pubDate).valueOf()
  );
  return paginate(sortedNotes, {
    pageSize: 21,
  });
}

const page: IPage = Astro.props.page;
let title = "Notes";
---

<DefaultPageLayout title={title}>
  <TopicListLayout title={title} page={page} />
  <BackToPage />
</DefaultPageLayout>
